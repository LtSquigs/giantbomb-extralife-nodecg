'use strict';
const currentGameRep = nodecg.Replicant('current-game');
const nextGameRep = nodecg.Replicant('next-game');
const streamNameRep = nodecg.Replicant('stream-name');
const donationLinkRep = nodecg.Replicant('donation-link');
const timerDisplayValueRep = nodecg.Replicant('timerDisplayValue');
const timerPausedRep = nodecg.Replicant('timerPaused');
const timerNegativeRep = nodecg.Replicant('timerNegative');
const timerStartBtn = document.getElementById('timer-start');
const timerPauseBtn = document.getElementById('timer-pause');
const gameNameInput = document.getElementById('game-name');
const nextGameNameInput = document.getElementById('next-game-name');
const streamNameInput = document.getElementById('stream-name');
const donationLinkInput = document.getElementById('donation-link');
const timerInput = document.getElementById('timer');
const adjustTimerBtn = document.getElementById('adjust-timer-btn');
const adjustTimerInput = document.getElementById('adjust-timer');
const gameUpdateBtn = document.getElementById('game-update');
const successAlert = document.getElementById('controls-success');
const numeral = window.numeral;
currentGameRep.on('change', (newValue) => {
    gameNameInput.value = newValue;
});
nextGameRep.on('change', (newValue) => {
    nextGameNameInput.value = newValue;
});
streamNameRep.on('change', (newValue) => {
    streamNameInput.value = newValue;
});
donationLinkRep.on('change', (newValue) => {
    donationLinkInput.value = newValue;
});
timerNegativeRep.on('change', (newValue) => {
    const tm = timerInput.value;
    if (newValue && tm.length > 0 && tm[0] !== '-') {
        timerInput.value = '-' + tm;
    }
    else if (!newValue && tm.length > 0 && tm[0] === '-') {
        timerInput.value = tm.slice(1);
    }
});
timerDisplayValueRep.on('change', (newValue) => {
    let time = numeral(newValue).format('00:00:00'); // tslint:disable-line:no-unsafe-any
    if (timerNegativeRep.value) {
        time = '-' + time;
    }
    timerInput.value = time;
});
timerPausedRep.on('change', (newValue) => {
    if (newValue) {
        timerPauseBtn.setAttribute('hidden', 'true');
        timerStartBtn.removeAttribute('hidden');
    }
    else {
        timerPauseBtn.removeAttribute('hidden');
        timerStartBtn.setAttribute('hidden', 'true');
    }
});
gameUpdateBtn.addEventListener('click', () => {
    streamNameRep.value = streamNameInput.value;
    currentGameRep.value = gameNameInput.value;
    nextGameRep.value = nextGameNameInput.value;
    donationLinkRep.value = donationLinkInput.value;
    successAlert.auto();
});
timerStartBtn.addEventListener('click', () => {
    nodecg.sendMessage('startTimer');
    // Also send the "Make sure the team widget knows this is running signal"
});
timerPauseBtn.addEventListener('click', () => {
    nodecg.sendMessage('stopTimer');
});
adjustTimerBtn.addEventListener('click', () => {
    const foo = adjustTimerInput.value;
    nodecg.sendMessage('setTimer', numeral().unformat(foo)); // tslint:disable-line:no-unsafe-any
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyZWFtLWNvbnRyb2xzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3RyZWFtLWNvbnRyb2xzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQVliLE1BQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQWMsY0FBYyxDQUFDLENBQUM7QUFDckUsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBVyxXQUFXLENBQUMsQ0FBQztBQUM1RCxNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFhLGFBQWEsQ0FBQyxDQUFDO0FBQ2xFLE1BQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQWUsZUFBZSxDQUFDLENBQUM7QUFDeEUsTUFBTSxvQkFBb0IsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFvQixtQkFBbUIsQ0FBQyxDQUFDO0FBQ3RGLE1BQU0sY0FBYyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQWMsYUFBYSxDQUFDLENBQUM7QUFDcEUsTUFBTSxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFnQixlQUFlLENBQUMsQ0FBQztBQUUxRSxNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBc0IsQ0FBQztBQUNsRixNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBc0IsQ0FBQztBQUNsRixNQUFNLGFBQWEsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBcUIsQ0FBQztBQUMvRSxNQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQXFCLENBQUM7QUFDeEYsTUFBTSxlQUFlLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxhQUFhLENBQXFCLENBQUM7QUFDbkYsTUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGVBQWUsQ0FBcUIsQ0FBQztBQUN2RixNQUFNLFVBQVUsR0FBRyxRQUFR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